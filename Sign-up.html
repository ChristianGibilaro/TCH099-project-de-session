<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <title>Sign-up</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="Scripts/animationScript.js" defer></script>
  <script src="Scripts/ElementCreator.js"></script>
  <script src="Scripts/mainScript.js"></script>

  <link rel="stylesheet" href="Styles/normalize.css">
  <link rel="stylesheet" href="Styles/Demonstrateur.css">

</head>

<script>
  var creator = new ElementCreator("Demonstrateur");
  creator.GetSteamGameData("1245620");
  creator.GetSteamUserData("76561199131939133");
  
</script>

<body>
  <!------------------------------------------------ SECTION Ω - MENU ---------------------------------------------->
  <header onclick="toggleMenu()">
    <script>
     document.write(creator.PrefabMenu);
    </script>
  </header>
  <div id="dimmer" onclick="toggleMenu()"></div>

  <div id="contenu">

    <div id="head">
      <script>
        document.write(creator.CreateHero("ressources/Final/Main/baniere.jpg", "ressources/Commun/logo_example.png"));
      </script>
      </div>

      <!------------------------------------------------ SECTION 5 - FORM ---------------------------------------------->

        <script>
          
          const dynamicFormConfig = {
            formTitle: "Créer un compte",
            formId: "form_new_user_id",
            formMethod: "POST",
            formEnctype: "multipart/form-data",
            inputConfig: [
              { type: 'text', label: 'Pseudonyme', name: 'pseudonym', required: true },
              { type: 'text', label: 'Nom', name: 'nom', required: true },
              { type: 'email', label: 'Email', name: 'email', required: true },
              { type: 'password', label: 'Mot de passe', name: 'password', required: true },
              { type: 'password', label: 'Confirmez le mot de passe', name: 'password2', required: true },
              { type: 'file', label: 'Image de profil', name: 'image' },
              { type: 'textarea', label: 'Description', name: 'description', required: true },
              { type: 'number', label: 'language_id', name: 'language_id', required: true },
              { type: 'date', label: 'Date de naissance', name: 'age', required: true },
              { type: 'checkbox', label: "J'accepte les", name: 'agreement', value: 'accepted', required: true, labelLink: '#' }
            ],
            submitButtonText: "Créer un compte",
            loginLink: "Sign-in.html",
            loginLinkText: "Déjà un compte ? <a href=\"#\">Se connecter</a>."
          };

          
          window.addEventListener('unload', () => {
  navigator.sendBeacon('/log', JSON.stringify({ message: 'Tab/window was closed' }));
});

          const generatedDynamicFormHTML = creator.CreateDynamicForm(
            dynamicFormConfig.formTitle,
            dynamicFormConfig.formId,
            dynamicFormConfig.formMethod,
            dynamicFormConfig.formEnctype,
            dynamicFormConfig.inputConfig,
            dynamicFormConfig.submitButtonText,
            dynamicFormConfig.loginLink,
            dynamicFormConfig.loginLinkText
          );

          document.write(generatedDynamicFormHTML);
          document.getElementById('soummission_btn').addEventListener('click', creerUser);
        </script>
  
  </div>
</body>

</html>